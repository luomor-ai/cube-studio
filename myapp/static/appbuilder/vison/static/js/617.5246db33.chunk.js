"use strict";(self.webpackChunkvite_ml_platform=self.webpackChunkvite_ml_platform||[]).push([[617],{27985:function(e,t,n){var a=n(73263),r="http://11.187.53.46:8080/api";t.Z={query_abtests:function(e){return a.Z.post({url:"".concat(r,"/query_abtests"),data:e})},query_edge_factorys:function(e){return a.Z.post({url:"".concat(r,"/query_edge_factorys"),data:e})},delete_edge_factory:function(e){return a.Z.post({url:"".concat(r,"/delete_edge_factory"),data:e})},query_structs:function(e){return a.Z.post({url:"".concat(r,"/query_structs"),data:e})},delete_struct:function(e){return a.Z.post({url:"".concat(r,"/delete_struct"),data:e})},query_associated_nodes:function(e){return a.Z.post({url:"".concat(r,"/query_associated_nodes"),data:e})},mod_struct:function(e){return a.Z.post({url:"".concat(r,"/mod_struct"),data:e})},add_struct:function(e){return a.Z.post({url:"".concat(r,"/add_struct"),data:e})},query_scenes:function(e){return a.Z.post({url:"".concat(r,"/query_scenes"),data:e})},query_associated_graphs:function(e){return a.Z.post({url:"".concat(r,"/query_associated_graphs"),data:e})},add_scene:function(e){return a.Z.post({url:"".concat(r,"/add_scene"),data:e})},mod_scene:function(e){return a.Z.post({url:"".concat(r,"/mod_scene"),data:e})},query_graph_templates:function(e){return a.Z.post({url:"".concat(r,"/query_graph_templates"),data:e})},query_components:function(e){return a.Z.post({url:"".concat(r,"/query_components"),data:e})},delete_component:function(e){return a.Z.post({url:"".concat(r,"/delete_component"),data:e})},query_component_historys:function(e){return a.Z.post({url:"".concat(r,"/query_component_historys"),data:e})},get_scene_names:function(e){return a.Z.post({url:"".concat(r,"/get_scene_names"),data:e})},get_scene_available_graphs:function(e){return a.Z.post({url:"".concat(r,"/get_scene_available_graphs"),data:e})},mod_abtest:function(e){return a.Z.post({url:"".concat(r,"/mod_abtest"),data:e})},add_abtest:function(e){return a.Z.post({url:"".concat(r,"/add_abtest"),data:e})},query_graphs:function(e){return a.Z.post({url:"".concat(r,"/query_graphs"),data:e})},get_graph_template_names:function(e){return a.Z.post({url:"".concat(r,"/get_graph_template_names"),data:e})},batch_query_components:function(e){return a.Z.post({url:"".concat(r,"/batch_query_components"),data:e})},query_graph_historys:function(e){return a.Z.post({url:"".concat(r,"/query_graph_historys"),data:e})},query_template_available_node_factorys:function(e){return a.Z.post({url:"".concat(r,"/query_template_available_node_factorys"),data:e})},get_edge_factory_names:function(e){return a.Z.post({url:"".concat(r,"/get_edge_factory_names"),data:e})},get_node_factory_names:function(e){return a.Z.post({url:"".concat(r,"/get_node_factory_names"),data:e})},query_node_factorys:function(e){return a.Z.post({url:"".concat(r,"/query_node_factorys"),data:e})},mod_graph:function(e){return a.Z.post({url:"".concat(r,"/mod_graph"),data:e})},add_graph:function(e){return a.Z.post({url:"".concat(r,"/add_graph"),data:e})},get_config_prototype:function(e){return a.Z.post({url:"".concat(r,"/get_config_prototype"),data:e})},rollback_graph:function(e){return a.Z.post({url:"".concat(r,"/rollback_graph"),data:e})}}},44122:function(e,t,n){n.d(t,{Q:function(){return a},a:function(){return r}});var a={0:"\u6709\u6548","-1":"\u5931\u6548",1:"\u521b\u5efa\u6210\u529f",2:"\u6d4b\u8bd5\u53d1\u5e03",3:"\u6b63\u5f0f\u53d1\u5e03",4:"\u516c\u6709",5:"\u79c1\u6709"},r={0:"green","-1":"#F56C6C",1:"#67C23A",2:"green",3:"#E6A23C",4:"#409EFF",5:"#909399"}},40393:function(e,t,n){n.d(t,{Z:function(){return _}});var a=n(12898),r=n(64606),l=n(10493),s=n(78960),o=n(1649),i=n(54317),c=n(92375),u=n(38319),d=n(44328),p=n.n(d),m=n(80340),f=l.Z.TextArea;function _(e){var t=s.Z.useForm(),n=(0,a.Z)(t,1)[0],d=(0,r.useState)({}),_=(0,a.Z)(d,2),y=_[0],Z=_[1],h=(0,r.useRef)(null);(0,r.useEffect)((function(){n.resetFields(),n.setFieldsValue(e.form),e.form.map_config&&Z(JSON.parse(JSON.stringify(e.form.map_config))),e.saveFrom&&e.saveFrom.graph_name&&n.setFieldsValue(e.saveFrom)}),[]);return(0,m.jsx)("div",{children:(0,m.jsxs)(s.Z,{name:"basic",labelCol:{span:8},style:{width:"80%"},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){e.submitForm(t,e.opName)},onFinishFailed:function(){console.log("\u5931\u8d25")},autoComplete:"off",ref:h,form:n,children:[e.formRolue.map((function(t){switch(t.type){case"input":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,initialValue:e.form[t.name],rules:[{required:!0,message:"\u8bf7\u8f93\u5165"+t.label}],children:(0,m.jsx)(l.Z,{disabled:!(!e.disableds&&!1!==e.isadd)})},t.name);case"select":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,m.jsx)(o.Z,{disabled:!(!e.disableds&&!1!==e.isadd),children:t.options?t.options.map((function(e){return(0,m.jsx)(o.Z.Option,{value:e.value,children:e.label},e.value)})):null})},t.name);case"picker":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,m.jsx)(i.Z,{style:{width:"100%"}})},t.name);case"radio":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u9009\u62e9"+t.label}],children:(0,m.jsx)(c.ZP.Group,{disabled:!(!e.disableds&&!1!==e.isadd),children:t.options?t.options.map((function(e){return(0,m.jsx)(c.ZP,{value:e.value,children:e.label},e.value)})):null})},t.name);case"json":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,children:(0,m.jsx)(p(),{src:y,displayDataTypes:!1,theme:"railscasts",onEdit:function(e){return function(e){return console.log(e),!0}(e)},onAdd:function(e){return function(e){return console.log(e),!0}(e)}})},t.name);case"textArea":return(0,m.jsx)(s.Z.Item,{label:t.label,name:t.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165"+t.label}],children:(0,m.jsx)(f,{rows:4,disabled:!(!e.disableds&&!1!==e.isadd)})},t.name)}})),(0,m.jsxs)(s.Z.Item,{wrapperCol:{offset:8,span:16},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[0===e.stepCurrent?(0,m.jsx)(u.Z,{onClick:function(){e.setEditStatus(!1),e.setBaseForm&&e.setBaseForm({})},children:"\u8fd4\u56de"}):null,0===e.stepCurrent?(0,m.jsx)(u.Z,{htmlType:"submit",style:{marginLeft:"20px"},children:"\u4e0b\u4e00\u6b65"}):null]}),e.stepCurrent&&0!==e.stepCurrent?(0,m.jsx)(u.Z,{type:"primary",children:"\u63d0\u4ea4"}):null,e.isadd&&void 0===e.stepCurrent?(0,m.jsx)(u.Z,{htmlType:"submit",type:"primary",disabled:!(!e.disableds&&!1!==e.isadd),children:"\u63d0\u4ea4"}):null]})]})})}},23794:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(64606),r=n(54317),l=n(78960),s=n(78195),o=n(57764),i=n(10493),c=n(1649),u=n(92375),d=n(38319),p=n(80340),m=r.Z.RangePicker;function f(e){var t=(0,a.useRef)(null);(0,a.useEffect)((function(){console.log("\u89e6\u53d1\u4e86",t.current.setFieldsValue(e.form))}),[]);return(0,p.jsx)("div",{children:(0,p.jsx)(l.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){e.queryList(t)},onFinishFailed:function(){console.log("\u5931\u8d25")},autoComplete:"off",ref:t,children:(0,p.jsxs)(s.Z,{children:[e.formRolue.map((function(e){switch(e.type){case"input":return(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{label:e.label,name:e.name,children:(0,p.jsx)(i.Z,{})},e.name)});case"select":return(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{label:e.label,name:e.name,children:(0,p.jsx)(c.Z,{children:e.options?e.options.map((function(e){return(0,p.jsx)(c.Z.Option,{value:e.value,children:e.label},e.value)})):null})},e.name)});case"picker":return(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{label:e.label,name:e.name,children:(0,p.jsx)(r.Z,{style:{width:"100%"}})},e.name)});case"radio":return(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{label:e.label,name:e.name,children:(0,p.jsxs)(u.ZP.Group,{children:[(0,p.jsx)(u.ZP,{value:1,children:"A"}),e.options?e.options.map((function(e){return(0,p.jsx)(u.ZP,{value:e.value,children:e.label},e.value)})):null]})},e.name)});case"rangePicker":return(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{label:e.label,name:e.name,children:(0,p.jsx)(m,{})},e.name)})}})),(0,p.jsx)(o.Z,{span:6,children:(0,p.jsx)(l.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,p.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"\u67e5\u8be2"})})})]})})})}},617:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(24258),r=n(12898),l=n(64606),s=n(32476),o=n(96279),i=n(4879),c=n(12522),u=n(23530),d=n(89680),p=n(38319),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},f=n(17240),_=function(e,t){return l.createElement(f.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:m}))};_.displayName="LinkOutlined";var y=l.forwardRef(_),Z=n(23794),h=n(40393),x=n(27985),b={type:"",factory_name:"",status:0,admin:"",time:""},g=[{type:"select",name:"type",label:"\u8282\u70b9\u7c7b\u578b",options:[{label:"recall",value:"recall"},{label:"sort",value:"sort"},{label:"filter",value:"filter"}]},{type:"input",name:"factory_name",label:"\u8282\u70b9\u5de5\u5382\u540d"},{type:"select",name:"status",label:"\u72b6\u6001",options:[{value:-1,label:"\u5931\u6548"},{value:0,label:"\u6709\u6548"},{value:1,label:"\u521b\u5efa\u6210\u529f"},{value:2,label:"\u6d4b\u8bd5\u53d1\u5e03"},{value:3,label:"\u6b63\u5f0f\u53d1\u5e03"},{value:4,label:"\u516c\u6709"},{value:5,label:"\u79c1\u6709"}]},{type:"input",name:"admin",label:"\u8d1f\u8d23\u4eba"},{type:"rangePicker",name:"time",label:"\u66f4\u65b0\u65f6\u95f4"}],v=n(44122),j=n(80340);function k(){var e=(0,l.useState)(!1),t=(0,r.Z)(e,2),n=t[0],m=t[1],f=(0,l.useState)([]),_=(0,r.Z)(f,2),k=_[0],q=_[1],C=(0,l.useState)([]),I=(0,r.Z)(C,2),w=I[0],F=(I[1],(0,l.useState)({})),S=(0,r.Z)(F,2),P=S[0],z=S[1],E=(0,l.useState)(!1),T=(0,r.Z)(E,2),O=T[0],L=T[1],N=(0,l.useState)(!1),A=(0,r.Z)(N,2),R=A[0],G=A[1],B=[{title:"#",render:function(e,t,n){return(0,j.jsx)("a",{children:n+1+""})}},{title:"\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u7248\u672c",dataIndex:"version",key:"version"},{title:"\u5de5\u5382\u540d",dataIndex:"factory_name",key:"factory_name"},{title:"\u540d\u79f0",dataIndex:"name",key:'"name'},{title:"\u72b6\u6001",dataIndex:"status",key:"status"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"admin",key:"admin"},{title:"\u63cf\u8ff0",dataIndex:"des",key:"des"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_time",key:"updated_time"}],V=[{title:"#",render:function(e,t,n){return(0,j.jsx)("a",{children:n+1+""})}},{title:"\u8282\u70b9\u7c7b\u578b",fType:"input",dataIndex:"type",key:"type"},{title:"\u8282\u70b9\u5de5\u5382\u540d",fType:"input",dataIndex:"factory_name",key:"factory_name"},{title:"\u72b6\u6001",fType:"input",dataIndex:"status",key:'"status',render:function(e){return(0,j.jsx)(s.Z,{color:v.a[e]?v.a[e]:"",children:v.Q[e]?v.Q[e]:""})}},{title:"\u6587\u6863\u5730\u5740",fType:"input",dataIndex:"url",key:"url",width:100,render:function(e){return(0,j.jsx)(y,{onClick:function(){return window.open(e,"blank")}})}},{title:"\u63cf\u8ff0",fType:"textArea",dataIndex:"des",key:"des"},{title:"\u8d1f\u8d23\u4eba",fType:"input",dataIndex:"admin",key:"admin"},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_time",key:"updated_time"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return(0,j.jsx)(o.Z,{size:"middle",children:(0,j.jsx)("a",{onClick:function(){L(!1),z((0,a.Z)({},t)),m(!0)},children:"\u67e5\u770b"},"view")})}}],D=V.filter((function(e){return e.fType})).map((function(e){return{type:e.fType,name:e.dataIndex,label:e.title}})),M=function(e){var t=e.admin,n=e.factory_name,a=e.status,r=e.time,l={factory_name:n||"",status:a||0,admin:t||"",type:e.type||"",min_updated_time:r&&r[0]?new Date(r[0]).getTime():0,max_updated_time:r&&r[1]?new Date(r[1]).getTime():0};x.Z.query_node_factorys({opr:"query_node_factorys",data:l}).then((function(e){0===e.status?(q(e.data.results),i.ZP.success(e.message)):i.ZP.error(e.message)}))};(0,l.useEffect)((function(){M({})}),[]);return(0,j.jsxs)("div",{style:{padding:"30px 40px"},children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(c.Z,{title:"\u67e5\u8be2\u6761\u4ef6",children:(0,j.jsx)(Z.Z,{formRolue:g,form:b,queryList:M})}),(0,j.jsx)(c.Z,{title:"\u67e5\u8be2\u7ed3\u679c",style:{marginTop:"20px"},children:(0,j.jsx)(u.Z,{columns:V,dataSource:k},"scene_name")})]}),(0,j.jsx)(d.Z,{width:900,title:O?O&&P.version?"\u7f16\u8f91":"\u65b0\u589e":"\u67e5\u770b",visible:n,onCancel:function(){m(!1)},footer:[(0,j.jsx)(p.Z,{onClick:function(){m(!1)},children:"\u5173\u95ed"},"back")],children:(0,j.jsx)(h.Z,{formRolue:D,form:P,isadd:O,showEdit:n,submitForm:function(e){var t=(0,a.Z)({},e);P.version?(t.version=P.version+1,x.Z.mod_scene({opr:"mod_scene",data:t}).then((function(e){0===e.status?(M({}),m(!1),i.ZP.success(e.message)):i.ZP.error(e.message)}))):x.Z.add_scene({opr:"add_scene",data:t}).then((function(e){0===e.status?(M({}),m(!1),i.ZP.success(e.message)):i.ZP.error(e.message)}))},resFied:function(){m(!1),M({})}})}),(0,j.jsx)(d.Z,{width:"60%",title:"\u5173\u8054\u56fe",visible:R,onCancel:function(){G(!1)},footer:[(0,j.jsx)(p.Z,{onClick:function(){G(!1)},children:"\u5173\u95ed"},"back")],children:(0,j.jsx)(u.Z,{columns:B,dataSource:w},"struct_name")})]})}},96279:function(e,t,n){n.d(t,{u:function(){return f},Z:function(){return y}});var a=n(17706),r=n(16027),l=n(12898),s=n(64606),o=n(82444),i=n.n(o),c=n(86131),u=n(3251);function d(e){var t=e.className,n=e.direction,l=e.index,o=e.marginDirection,i=e.children,c=e.split,u=e.wrap,d=s.useContext(f),p=d.horizontalSize,m=d.verticalSize,_=d.latestIndex,y={};return d.supportFlexGap||("vertical"===n?l<_&&(y={marginBottom:p/(c?2:1)}):y=(0,a.Z)((0,a.Z)({},l<_&&(0,r.Z)({},o,p/(c?2:1))),u&&{paddingBottom:m})),null===i||void 0===i?null:s.createElement(s.Fragment,null,s.createElement("div",{className:t,style:y},i),l<_&&c&&s.createElement("span",{className:"".concat(t,"-split"),style:y},c))}var p=n(2341),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},f=s.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),_={small:8,middle:16,large:24};var y=function(e){var t,n=s.useContext(u.E_),o=n.getPrefixCls,y=n.space,Z=n.direction,h=e.size,x=void 0===h?(null===y||void 0===y?void 0:y.size)||"small":h,b=e.align,g=e.className,v=e.children,j=e.direction,k=void 0===j?"horizontal":j,q=e.prefixCls,C=e.split,I=e.style,w=e.wrap,F=void 0!==w&&w,S=m(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),P=(0,p.Z)(),z=s.useMemo((function(){return(Array.isArray(x)?x:[x,x]).map((function(e){return function(e){return"string"===typeof e?_[e]:e||0}(e)}))}),[x]),E=(0,l.Z)(z,2),T=E[0],O=E[1],L=(0,c.Z)(v,{keepEmpty:!0}),N=void 0===b&&"horizontal"===k?"center":b,A=o("space",q),R=i()(A,"".concat(A,"-").concat(k),(t={},(0,r.Z)(t,"".concat(A,"-rtl"),"rtl"===Z),(0,r.Z)(t,"".concat(A,"-align-").concat(N),N),t),g),G="".concat(A,"-item"),B="rtl"===Z?"marginLeft":"marginRight",V=0,D=L.map((function(e,t){return null!==e&&void 0!==e&&(V=t),s.createElement(d,{className:G,key:"".concat(G,"-").concat(t),direction:k,index:t,marginDirection:B,split:C,wrap:F},e)})),M=s.useMemo((function(){return{horizontalSize:T,verticalSize:O,latestIndex:V,supportFlexGap:P}}),[T,O,V,P]);if(0===L.length)return null;var Q={};return F&&(Q.flexWrap="wrap",P||(Q.marginBottom=-O)),P&&(Q.columnGap=T,Q.rowGap=O),s.createElement("div",(0,a.Z)({className:R,style:(0,a.Z)((0,a.Z)({},Q),I)},S),s.createElement(f.Provider,{value:M},D))}}}]);